<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Budapest Major 2025 - Pick'Ems</title>
<style>
    :root {
        --bg-dark: #120c18;
        --bg-panel: #1e1628;
        --accent-green: #4caf50;
        --accent-red: #e53935;
        --accent-yellow: #fdd835;
        --text-primary: #ffffff;
        --text-secondary: #a09cb0;
        --slot-bg: #2a2036;
        --slot-border: #3c344a;
        --btn-color: #c0e024;
    }

    body {
        background-color: var(--bg-dark);
        background-image: radial-gradient(circle at 50% 0%, #2d1b4e 0%, var(--bg-dark) 70%);
        color: var(--text-primary);
        font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
        margin: 0;
        padding: 20px;
        min-height: 100vh;
        display: flex;
        flex-direction: column;
        align-items: center;
        overscroll-behavior-y: none;
    }

    /* --- Header --- */
    header { width: 100%; max-width: 1150px; margin-bottom: 10px; }
    h1 { margin: 0 0 5px 0; font-size: 24px; font-weight: 700; letter-spacing: 0.5px; }
    .status { color: var(--accent-red); font-size: 11px; font-weight: bold; text-transform: uppercase; letter-spacing: 1px; }

    /* --- Top Rail (One Row, No Scroll) --- */
    .team-rail-container {
        width: 100%;
        max-width: 1150px; /* Slightly wider to fit 16 items comfortably */
        background: var(--bg-panel);
        border: 1px solid #333;
        border-radius: 12px;
        padding: 15px;
        margin-bottom: 20px;
        box-shadow: 0 4px 15px rgba(0,0,0,0.3);
        box-sizing: border-box;
    }

    .rail-label {
        font-size: 11px;
        color: var(--text-secondary);
        margin-bottom: 10px;
        display: block;
        text-transform: uppercase;
        font-weight: bold;
    }

    .team-rail {
        display: flex;
        justify-content: space-between; /* Spread evenly */
        align-items: center;
        gap: 6px; 
        width: 100%;
        flex-wrap: nowrap; /* FORCE ONE ROW */
    }

    .team-chip {
        /* Flexible size: shrinks to fit row, grows up to 55px */
        flex: 1 1 auto; 
        max-width: 55px; 
        aspect-ratio: 1 / 1; /* Keep square shape */
        
        background: #251d30;
        border-radius: 8px;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        border: 2px solid transparent;
        transition: all 0.2s;
        position: relative;
        /* Touch optimization */
        touch-action: manipulation; 
        -webkit-tap-highlight-color: transparent;
    }
    
    .team-chip:active { transform: scale(0.95); }
    
    .team-chip.active-selection {
        border-color: var(--btn-color);
        box-shadow: 0 0 12px rgba(192, 224, 36, 0.4);
        background: #322840;
        z-index: 2;
    }

    .team-chip.placed {
        opacity: 0.2;
        filter: grayscale(100%);
    }

    .rail-logo {
        width: 70%;
        height: 70%;
        object-fit: contain;
        pointer-events: none;
    }

    /* Tooltip (Desktop only) */
    .tooltip {
        display: none;
    }
    @media (hover: hover) {
        .tooltip {
            display: block;
            position: absolute;
            bottom: -25px;
            background: #000;
            color: #fff;
            font-size: 10px;
            padding: 4px 8px;
            border-radius: 4px;
            opacity: 0;
            transition: opacity 0.2s;
            pointer-events: none;
            white-space: nowrap;
            z-index: 100;
            font-weight: bold;
        }
        .team-chip:hover .tooltip { opacity: 1; }
    }


    /* --- Main Grid Layout --- */
    .grid-container {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 15px;
        width: 100%;
        max-width: 1150px;
        margin-bottom: 20px;
    }

    /* Mobile Breakpoint */
    @media (max-width: 768px) {
        .grid-container {
            grid-template-columns: 1fr;
        }
        .panel-full { grid-column: span 1; }
        
        /* On very small screens, let the rail wrap if ABSOLUTELY necessary 
           (prevents breaking layout), or keep shrinking logos */
        .team-rail {
            gap: 2px;
        }
    }

    .panel {
        background: var(--bg-panel);
        border-radius: 12px;
        padding: 15px;
        border: 1px solid #333;
    }

    .panel-full { grid-column: span 2; }
    @media (max-width: 768px) { .panel-full { grid-column: span 1; } }

    .panel-header {
        margin-bottom: 12px;
    }

    .category-title { font-size: 18px; font-weight: 800; display: inline-block; margin-right: 8px;}
    .category-desc { font-size: 11px; color: var(--text-secondary); display: inline-block;}

    .t-green { color: var(--accent-green); }
    .t-red { color: var(--accent-red); }
    .t-yellow { color: var(--accent-yellow); }

    /* Slot Styling */
    .slots-row {
        display: flex;
        gap: 10px;
        justify-content: flex-start;
        flex-wrap: wrap;
    }

    .slot {
        width: 75px;
        height: 95px;
        background: var(--slot-bg);
        border: 2px solid var(--slot-border);
        border-radius: 8px;
        display: flex;
        align-items: center;
        justify-content: center;
        flex-direction: column;
        cursor: pointer;
        transition: all 0.2s;
        position: relative;
        touch-action: manipulation;
        -webkit-tap-highlight-color: transparent;
    }
    
    .slot:active { border-color: #666; background: #322840; }
    
    .slot-placeholder { font-size: 20px; color: #444; font-weight: bold; }

    .slotted-team {
        width: 100%;
        height: 100%;
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 5px;
    }
    
    .slot-logo {
        width: 55px;
        height: 55px;
        object-fit: contain;
        filter: drop-shadow(0 2px 4px rgba(0,0,0,0.5));
    }

    /* --- Controls --- */
    .controls {
        width: 100%;
        max-width: 1150px;
        display: flex;
        justify-content: flex-end;
        margin-top: 10px;
        padding-bottom: 50px;
    }

    .btn-reset {
        background: #333;
        color: #888;
        border: 1px solid #444;
        padding: 10px 24px;
        font-weight: 700;
        font-size: 12px;
        border-radius: 20px;
        cursor: pointer;
        text-transform: uppercase;
        transition: all 0.2s;
    }
    .btn-reset:hover { background: #444; color: #fff; }

</style>
</head>
<body>

<header>
    <h1>Budapest Major 2025</h1>
    <div class="status">Stage 2 Pick'Ems</div>
</header>

<div class="team-rail-container">
    <span class="rail-label">Select Team</span>
    <div class="team-rail" id="team-rail">
        </div>
</div>

<div class="grid-container">
    
    <div class="panel">
        <div class="panel-header">
            <div class="category-title t-green">3-0</div>
            <span class="category-desc">Undefeated</span>
        </div>
        <div class="slots-row" id="slots-3-0">
            </div>
    </div>

    <div class="panel">
        <div class="panel-header">
            <div class="category-title t-red">0-3</div>
            <span class="category-desc">Eliminated</span>
        </div>
        <div class="slots-row" id="slots-0-3">
            </div>
    </div>

    <div class="panel panel-full">
        <div class="panel-header">
            <div class="category-title t-yellow">3-1 / 3-2</div>
            <span class="category-desc">Advanced</span>
        </div>
        <div class="slots-row" id="slots-advance">
            </div>
    </div>

</div>

<div class="controls">
    <button class="btn-reset" onclick="resetAll()">RESET</button>
</div>

<script>
    const TEAMS = [
        { name: "MIBR", id: "mibr", logo: "https://i.imgur.com/uZaGEQJ.png" },
        { name: "Imperial", id: "imperial", logo: "https://i.imgur.com/N9b8GtT.png" },
        { name: "Passion UA", id: "passion", logo: "https://i.imgur.com/UDmtx0S.png" },
        { name: "3DMAX", id: "3dmax", logo: "https://i.imgur.com/MQoihGJ.png" },
        { name: "Astralis", id: "astralis", logo: "https://i.imgur.com/XD2K3Kz.png" },
        { name: "M80", id: "m80", logo: "https://i.imgur.com/dO10wnN.png" },
        { name: "Liquid", id: "liquid", logo: "https://i.imgur.com/gstZIWf.png" },
        { name: "Aurora", id: "aurora", logo: "https://i.imgur.com/tztun45.png" },
        { name: "NIP", id: "nip", logo: "https://i.imgur.com/GL3xl7m.png" },
        { name: "FlyQuest", id: "flyquest", logo: "https://i.imgur.com/zdh9CUD.png" },
        { name: "TYLOO", id: "tyloo", logo: "https://i.imgur.com/7CTyRqF.png" },
        { name: "PARIVISION", id: "parivision", logo: "https://i.imgur.com/JVmpGws.png" },
        { name: "NAVI", id: "navi", logo: "https://i.imgur.com/s7anw74.png" },
        { name: "FaZe", id: "faze", logo: "https://i.imgur.com/1B4hj1G.png" },
        { name: "Fnatic", id: "fnatic", logo: "https://i.imgur.com/isPQZnA.png" },
        { name: "B8", id: "b8", logo: "https://i.imgur.com/YGPqQVI.png" }
    ];

    let picks = {
        '3-0': [null, null],
        '0-3': [null, null],
        'advance': [null, null, null, null, null, null]
    };

    let selectedTeamId = null; 

    function init() {
        renderRail();
        renderSlots();
    }

    function renderRail() {
        const rail = document.getElementById('team-rail');
        rail.innerHTML = '';
        TEAMS.forEach(team => {
            const el = document.createElement('div');
            el.className = 'team-chip';
            
            if (isTeamPlaced(team.id)) el.classList.add('placed');
            if (selectedTeamId === team.id) el.classList.add('active-selection');

            const img = document.createElement('img');
            img.src = team.logo;
            img.className = 'rail-logo';
            img.draggable = false; 

            const tt = document.createElement('div');
            tt.className = 'tooltip';
            tt.innerText = team.name;

            el.appendChild(img);
            el.appendChild(tt);
            
            el.onclick = () => selectTeam(team.id);
            
            rail.appendChild(el);
        });
    }

    function renderSlots() {
        renderCategory('3-0', 'slots-3-0');
        renderCategory('0-3', 'slots-0-3');
        renderCategory('advance', 'slots-advance');
    }

    function renderCategory(cat, divId) {
        const container = document.getElementById(divId);
        container.innerHTML = '';
        
        picks[cat].forEach((pickId, idx) => {
            const slot = document.createElement('div');
            slot.className = 'slot';
            slot.onclick = () => handleSlotClick(cat, idx);
            
            if (pickId) {
                const team = TEAMS.find(t => t.id === pickId);
                slot.innerHTML = `
                    <div class="slotted-team">
                        <img src="${team.logo}" class="slot-logo" draggable="false">
                    </div>
                `;
            } else {
                slot.innerHTML = `<span class="slot-placeholder">?</span>`;
            }
            container.appendChild(slot);
        });
    }

    function isTeamPlaced(id) {
        if (picks['3-0'].includes(id)) return true;
        if (picks['0-3'].includes(id)) return true;
        if (picks['advance'].includes(id)) return true;
        return false;
    }

    function selectTeam(id) {
        if (isTeamPlaced(id)) return; 
        
        if (selectedTeamId === id) {
            selectedTeamId = null; 
        } else {
            selectedTeamId = id;
        }
        renderRail();
    }

    function handleSlotClick(cat, idx) {
        if (picks[cat][idx]) {
            picks[cat][idx] = null;
            renderRail();
            renderSlots();
            return;
        }

        if (selectedTeamId) {
            picks[cat][idx] = selectedTeamId;
            selectedTeamId = null; 
            renderRail();
            renderSlots();
        }
    }

    function resetAll() {
        if(confirm("Reset all picks?")) {
            picks = {
                '3-0': [null, null],
                '0-3': [null, null],
                'advance': [null, null, null, null, null, null]
            };
            selectedTeamId = null;
            init();
        }
    }

    init();
</script>
</body>
</html>
