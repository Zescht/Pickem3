<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Budapest Major 2025 - Pick'Ems</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Rajdhani:wght@600;700&family=Teko:wght@400;500;600&display=swap" rel="stylesheet">

<style>
    :root {
        --bg-color: #0b0c10;
        --panel-bg: #15161a;
        --accent-orange: #ff9600;
        --accent-green: #00ff00; 
        --accent-red: #ff0000;   
        --text-white: #ffffff;
        --slot-empty: #1a1a1f;
        
        --font-ui: 'Teko', sans-serif;
        --font-data: 'Rajdhani', sans-serif;
    }

    body {
        font-family: var(--font-data);
        background-color: var(--bg-color);
        background-image: radial-gradient(circle at 50% 0%, #2a2a2a 0%, #0b0c10 60%);
        color: var(--text-white);
        margin: 0;
        padding: 10px;
        min-height: 100vh;
        display: flex;
        flex-direction: column;
        align-items: center;
        overscroll-behavior-y: none; 
    }

    /* --- HEADER --- */
    header { 
        width: 100%;
        max-width: 1150px; 
        margin-bottom: 10px;
        display: flex;
        flex-direction: column;
        align-items: center;
        border-bottom: 1px solid #333;
        padding-bottom: 5px;
    }
    
    h1 { 
        margin: 0;
        font-family: var(--font-ui);
        font-size: 2.2rem;
        font-weight: 500;
        letter-spacing: 0.05em;
        text-transform: uppercase;
        color: var(--text-white);
        text-shadow: 0 0 10px rgba(255, 150, 0, 0.3);
        text-align: center;
        line-height: 1;
    }
    
    .status { 
        color: var(--accent-orange);
        font-family: var(--font-ui);
        font-size: 1.2rem; 
        font-weight: 500; 
        text-transform: uppercase; 
        letter-spacing: 2px;
        text-align: center;
    }

    /* --- TEAM RAIL --- */
    .team-rail-container {
        width: 100%;
        max-width: 1150px;
        background: var(--panel-bg);
        border-top: 2px solid var(--accent-orange);
        border-bottom: 1px solid #333;
        box-shadow: 0 10px 30px rgba(0,0,0,0.5);
        padding: 10px;
        margin-bottom: 15px;
        box-sizing: border-box;
    }

    .rail-label {
        font-family: var(--font-ui);
        font-size: 1.1rem;
        color: var(--text-white);
        margin-bottom: 5px;
        display: block;
        text-transform: uppercase;
        text-align: center;
        letter-spacing: 1px;
    }

    .team-rail {
        display: flex;
        flex-wrap: nowrap; 
        overflow-x: auto;
        -webkit-overflow-scrolling: touch; 
        
        /* Hide Scrollbar */
        scrollbar-width: none; 
        -ms-overflow-style: none;  
        
        gap: 8px;
        width: 100%;
        
        /* CENTER Alignment Logic */
        /* Default to Center for screens that fit the teams */
        justify-content: center;
        align-items: center;

        background-image: linear-gradient(#222 1px, transparent 1px), linear-gradient(90deg, #222 1px, transparent 1px);
        background-size: 20px 20px;
        
        padding: 10px 0;
        box-sizing: border-box;
    }
    
    /* Responsive alignment: If screen is small, align left so scrolling works */
    @media (max-width: 950px) {
        .team-rail {
            justify-content: flex-start;
        }
    }

    .team-rail::-webkit-scrollbar { display: none; }

    .team-chip {
        flex: 0 0 50px; 
        width: 50px;
        height: 50px;
        background: linear-gradient(135deg, #2a2a30 0%, #232328 100%);
        border: 1px solid #444;
        border-left: 3px solid #666;
        /* Ensure Logo Centering */
        display: flex;
        align-items: center;
        justify-content: center;
        
        cursor: pointer;
        transition: all 0.2s;
        position: relative;
        box-shadow: 0 4px 6px rgba(0,0,0,0.3);
        touch-action: manipulation;
    }
    
    .team-chip:hover {
        border-left-color: var(--accent-orange);
        transform: translateY(-2px);
        background: #333;
    }
    
    .team-chip.active-selection {
        border-color: var(--accent-orange);
        border-left-color: var(--accent-orange);
        box-shadow: 0 0 10px rgba(255, 150, 0, 0.4);
        background: #3a3a40;
        z-index: 2;
    }

    .team-chip.placed {
        opacity: 0.3;
        filter: grayscale(100%);
        border-left-color: #333;
        cursor: not-allowed;
        transform: none; 
    }

    .rail-logo {
        width: 70%;
        height: 70%;
        object-fit: contain;
        pointer-events: none;
        filter: drop-shadow(0 0 2px rgba(0,0,0,0.5));
        /* Ensure block display to prevent baseline shifts */
        display: block;
    }

    /* --- GRID --- */
    .grid-container {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 10px;
        width: 100%;
        max-width: 1150px;
        margin-bottom: 10px;
    }

    @media (max-width: 768px) {
        .grid-container { grid-template-columns: 1fr; }
        .panel-full { grid-column: span 1; }
    }

    .panel {
        background: var(--panel-bg);
        border-top: 2px solid #444;
        border-bottom: 1px solid #333;
        padding: 0; 
        box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        display: flex;
        flex-direction: column;
    }
    
    .panel.p-3-0 { border-top-color: var(--accent-green); }
    .panel.p-0-3 { border-top-color: var(--accent-red); }
    .panel.p-adv { border-top-color: var(--accent-orange); }

    .panel-header {
        background: rgba(0,0,0,0.3);
        padding: 5px;
        text-align: center;
        border-bottom: 1px solid #333;
    }

    .category-title { 
        font-family: var(--font-ui);
        font-size: 1.6rem;
        line-height: 1;
        font-weight: 500;
        text-transform: uppercase;
        display: block;
    }
    
    .category-desc { 
        font-family: var(--font-data);
        font-size: 0.8rem; 
        color: #888; 
        text-transform: uppercase;
        letter-spacing: 1px;
    }

    .t-green { color: var(--accent-green); text-shadow: 0 0 10px rgba(0, 255, 0, 0.3); }
    .t-red { color: var(--accent-red); text-shadow: 0 0 10px rgba(255, 0, 0, 0.3); }
    .t-orange { color: var(--accent-orange); text-shadow: 0 0 10px rgba(255, 150, 0, 0.3); }

    .panel-content {
        padding: 10px;
        background-image: linear-gradient(#222 1px, transparent 1px), linear-gradient(90deg, #222 1px, transparent 1px);
        background-size: 20px 20px;
        flex: 1;
        display: flex;
        justify-content: center;
        align-items: center;
        overflow-x: auto; 
        scrollbar-width: none;
        -ms-overflow-style: none;
    }
    .panel-content::-webkit-scrollbar { display: none; }

    .panel-full { grid-column: span 2; }
    @media (max-width: 768px) { .panel-full { grid-column: span 1; } }

    /* Slots Styling */
    .slots-row {
        display: flex;
        gap: 10px;
        justify-content: center;
        flex-wrap: wrap; 
    }

    .slot {
        width: 65px;
        height: 85px;
        background-color: var(--slot-empty);
        border: 1px solid #333;
        display: flex;
        align-items: center;
        justify-content: center;
        flex-direction: column;
        cursor: pointer;
        transition: all 0.3s;
        position: relative;
    }
    
    .slot:hover {
        border-color: #666;
        box-shadow: inset 0 0 10px rgba(255,255,255,0.05);
    }
    
    .p-3-0 .slot:hover { border-color: var(--accent-green); }
    .p-0-3 .slot:hover { border-color: var(--accent-red); }
    .p-adv .slot:hover { border-color: var(--accent-orange); }

    .slot-placeholder { 
        font-family: var(--font-ui);
        font-size: 1.5rem; 
        color: #333;
        font-weight: bold;
    }

    .slotted-team {
        width: 100%;
        height: 100%;
        display: flex;
        align-items: center;
        justify-content: center;
        background: linear-gradient(180deg, #25252b 0%, #1a1a1f 100%);
        border: 1px solid #444;
        box-sizing: border-box;
    }
    
    .p-3-0 .slotted-team { border-bottom: 3px solid var(--accent-green); }
    .p-0-3 .slotted-team { border-bottom: 3px solid var(--accent-red); }
    .p-adv .slotted-team { border-bottom: 3px solid var(--accent-orange); }
    
    .slot-logo {
        width: 45px;
        height: 45px;
        object-fit: contain;
        display: block; 
        filter: drop-shadow(0 2px 4px rgba(0,0,0,0.8));
    }

    /* --- CONTROLS --- */
    .controls {
        width: 100%;
        max-width: 1150px;
        display: flex;
        justify-content: center; 
        margin-top: 5px;
        padding-bottom: 20px;
    }

    .btn-reset {
        background: transparent;
        border: 1px solid var(--accent-orange);
        color: var(--accent-orange);
        padding: 2px 30px;
        font-family: var(--font-ui);
        font-size: 1.2rem; 
        font-weight: 500;
        letter-spacing: 1px;
        text-transform: uppercase;
        cursor: pointer;
        transition: all 0.2s;
        clip-path: polygon(10% 0, 100% 0, 100% 70%, 90% 100%, 0 100%, 0 30%);
        min-width: 120px;
    }
    
    .btn-reset:hover { 
        background-color: var(--accent-orange);
        color: #000;
        box-shadow: 0 0 10px rgba(255, 150, 0, 0.5);
    }

</style>
</head>
<body>

<header>
    <h1>Budapest Major 2025</h1>
    <div class="status">Stage 3 Pick'Ems</div>
</header>

<div class="team-rail-container">
    <span class="rail-label">Select Team From Pool</span>
    <div class="team-rail" id="team-rail">
        </div>
</div>

<div class="grid-container">
    
    <div class="panel p-3-0">
        <div class="panel-header">
            <div class="category-title t-green">3-0</div>
            <span class="category-desc">Undefeated</span>
        </div>
        <div class="panel-content">
            <div class="slots-row" id="slots-3-0"></div>
        </div>
    </div>

    <div class="panel p-0-3">
        <div class="panel-header">
            <div class="category-title t-red">0-3</div>
            <span class="category-desc">Eliminated</span>
        </div>
        <div class="panel-content">
            <div class="slots-row" id="slots-0-3"></div>
        </div>
    </div>

    <div class="panel panel-full p-adv">
        <div class="panel-header">
            <div class="category-title t-orange">3-1 / 3-2</div>
            <span class="category-desc">Teams Advancing</span>
        </div>
        <div class="panel-content">
            <div class="slots-row" id="slots-advance"></div>
        </div>
    </div>

</div>

<div class="controls">
    <button class="btn-reset" onclick="resetAll()">Reset Picks</button>
</div>

<script>
    const TEAMS = [
        { name: "Team 1", id: "t1", logo: "https://i.imgur.com/3KQXpJe.png" },
        { name: "Team 2", id: "t2", logo: "https://i.imgur.com/f5bHaZd.png" },
        { name: "Team 3", id: "t3", logo: "https://i.imgur.com/1lSSUvP.png" },
        { name: "Team 4", id: "t4", logo: "https://i.imgur.com/cCAjYXX.png" },
        { name: "Team 5", id: "t5", logo: "https://i.imgur.com/BRXSu1u.png" },
        { name: "Team 6", id: "t6", logo: "https://i.imgur.com/B9DJO0y.png" },
        { name: "Team 7", id: "t7", logo: "https://i.imgur.com/I3DWp0s.png" },
        { name: "Team 8", id: "t8", logo: "https://i.imgur.com/HwG9BvC.png" },
        { name: "Team 9", id: "t9", logo: "https://i.imgur.com/FfvHn5D.png" },
        { name: "Team 10", id: "t10", logo: "https://i.imgur.com/VZzf81B.png" },
        { name: "Team 11", id: "t11", logo: "https://i.imgur.com/RYWY6yS.png" },
        { name: "Team 12", id: "t12", logo: "https://i.imgur.com/yGYCn40.png" },
        { name: "Team 13", id: "t13", logo: "https://i.imgur.com/mlBFh94.png" },
        { name: "Team 14", id: "t14", logo: "https://i.imgur.com/5sZOoJK.png" },
        { name: "Team 15", id: "t15", logo: "https://i.imgur.com/WRBSDps.png" },
        { name: "Team 16", id: "t16", logo: "https://i.imgur.com/vQ0r0x4.png" }
    ];

    let picks = {
        '3-0': [null, null],
        '0-3': [null, null],
        'advance': [null, null, null, null, null, null]
    };
    picks['advance'] = [null, null, null, null, null, null]; 

    let selectedTeamId = null;

    function init() {
        renderRail();
        renderSlots();
    }

    function renderRail() {
        const rail = document.getElementById('team-rail');
        rail.innerHTML = '';
        TEAMS.forEach(team => {
            const el = document.createElement('div');
            el.className = 'team-chip';
            
            if (isTeamPlaced(team.id)) el.classList.add('placed');
            if (selectedTeamId === team.id) el.classList.add('active-selection');

            const img = document.createElement('img');
            img.src = team.logo;
            img.className = 'rail-logo';
            img.draggable = false; 
            
            el.appendChild(img);
            
            el.onclick = () => selectTeam(team.id);
            
            rail.appendChild(el);
        });
    }

    function renderSlots() {
        renderCategory('3-0', 'slots-3-0');
        renderCategory('0-3', 'slots-0-3');
        renderCategory('advance', 'slots-advance');
    }

    function renderCategory(cat, divId) {
        const container = document.getElementById(divId);
        container.innerHTML = '';
        
        picks[cat].forEach((pickId, idx) => {
            const slot = document.createElement('div');
            slot.className = 'slot';
            slot.onclick = () => handleSlotClick(cat, idx);
            
            if (pickId) {
                const team = TEAMS.find(t => t.id === pickId);
                slot.innerHTML = `
                    <div class="slotted-team">
                        <img src="${team.logo}" class="slot-logo" draggable="false">
                    </div>
                `;
            } else {
                slot.innerHTML = `<span class="slot-placeholder">?</span>`;
            }
            container.appendChild(slot);
        });
    }

    function isTeamPlaced(id) {
        if (picks['3-0'].includes(id)) return true;
        if (picks['0-3'].includes(id)) return true;
        if (picks['advance'].includes(id)) return true;
        return false;
    }

    function selectTeam(id) {
        if (isTeamPlaced(id)) return;
        
        if (selectedTeamId === id) {
            selectedTeamId = null;
        } else {
            selectedTeamId = id;
        }
        renderRail();
    }

    function handleSlotClick(cat, idx) {
        // LOGIC CHANGE: Check for selected team FIRST. 
        // If a team is selected, we place it (swapping whatever is there).
        if (selectedTeamId) {
            picks[cat][idx] = selectedTeamId;
            selectedTeamId = null; 
            renderRail();
            renderSlots();
            return;
        }

        // If NO team is selected, but the slot is full, then we remove it.
        if (picks[cat][idx]) {
            picks[cat][idx] = null;
            renderRail();
            renderSlots();
        }
    }

    function resetAll() {
        if(confirm("Reset all picks?")) {
            picks = {
                '3-0': [null, null],
                '0-3': [null, null],
                'advance': [null, null, null, null, null, null]
            };
            selectedTeamId = null;
            init();
        }
    }

    init();
</script>
</body>
</html>
